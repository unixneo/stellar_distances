<%= turbo_frame_tag "results" do %>
  <!-- Main Result Card -->
  <div class="card result">
    <div class="card-title">üìç Journey to <%= @result[:star].name %></div>
    <p style="color: var(--text-muted); margin-top: -0.5rem; margin-bottom: 1rem;">
      Using <%= @result[:propulsion_system].name %>
    </p>
    
    <div class="result-hero">
      <span class="result-value"><%= @result[:travel_time_human] %></span>
      <span class="result-unit">one-way travel time</span>
    </div>
    
    <div class="result-grid">
      <div class="result-item">
        <div class="result-item-label">Distance</div>
        <div class="result-item-value"><%= number_with_delimiter(@result[:distance_ly].round(2)) %> ly</div>
      </div>
      
      <div class="result-item">
        <div class="result-item-label">Velocity</div>
        <div class="result-item-value">
          <% if @result[:velocity_fraction_c] >= 0.01 %>
            <%= (@result[:velocity_fraction_c] * 100).round(2) %>% c
          <% else %>
            <%= number_with_delimiter(@result[:velocity_km_s].round(1)) %> km/s
          <% end %>
        </div>
      </div>
      
      <div class="result-item">
        <div class="result-item-label">Generations</div>
        <div class="result-item-value"><%= number_with_delimiter(@result[:generations]) %></div>
      </div>
    </div>
  </div>

  <!-- Communication Delay -->
  <div class="card">
    <div class="card-title">üì° Communication Reality</div>
    <div class="comm-grid">
      <div>
        <strong>Message travel time (one way):</strong><br>
        <span style="font-size: 1.25rem; color: var(--primary);">
          <% if @result[:communication_delay_years] < 1 %>
            <%= (@result[:communication_delay_years] * 365.25).round(1) %> days
          <% else %>
            <%= number_with_delimiter(@result[:communication_delay_years].round(1)) %> years
          <% end %>
        </span>
      </div>
      <div>
        <strong>Round-trip communication:</strong><br>
        <span style="font-size: 1.25rem; color: var(--primary);">
          <% if @result[:round_trip_communication_years] < 1 %>
            <%= (@result[:round_trip_communication_years] * 365.25).round(1) %> days
          <% else %>
            <%= number_with_delimiter(@result[:round_trip_communication_years].round(1)) %> years
          <% end %>
        </span>
      </div>
    </div>
  </div>

  <!-- Energy Requirements -->
  <div class="card">
    <div class="card-title">‚ö° Energy Requirements</div>
    <p style="color: var(--text-muted);">
      To accelerate <%= number_with_delimiter(@result[:payload_mass_kg].round(0)) %> kg to 
      <%= @result[:propulsion_system].formatted_velocity %>:
    </p>
    <div class="energy-grid">
      <div class="energy-item">
        <div class="energy-value"><%= number_with_delimiter(@result[:energy_in_hiroshima_bombs].round(1)) %></div>
        <div class="energy-label">Hiroshima bombs equivalent</div>
      </div>
      <div class="energy-item">
        <div class="energy-value">
          <% if @result[:energy_in_world_years] < 0.001 %>
            <%= (@result[:energy_in_world_years] * 365.25).round(2) %> days
          <% elsif @result[:energy_in_world_years] < 1 %>
            <%= (@result[:energy_in_world_years] * 12).round(1) %> months
          <% else %>
            <%= number_with_delimiter(@result[:energy_in_world_years].round(1)) %> years
          <% end %>
        </div>
        <div class="energy-label">of total world energy production</div>
      </div>
    </div>
    <p class="hint">
      Note: This is just kinetic energy for acceleration. Does not include deceleration, 
      life support, or propulsion system inefficiencies.
    </p>
  </div>

  <!-- Feasibility Assessment -->
  <div class="card">
    <div class="card-title">
      üéØ Feasibility: 
      <span class="feasibility-<%= @result[:feasibility_assessment][:level] %>">
        <%= @result[:feasibility_assessment][:level].to_s.titleize %>
      </span>
    </div>
    <p><%= @result[:feasibility_assessment][:description] %></p>
  </div>

  <!-- Reality Checks -->
  <% if @result[:reality_check].any? %>
    <div class="reality-checks">
      <div class="reality-checks-title">‚ö†Ô∏è Reality Checks</div>
      <ul>
        <% @result[:reality_check].each do |check| %>
          <li><%= check %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- Star Info -->
  <div class="card">
    <div class="card-title">‚≠ê About <%= @result[:star].name %></div>
    <div class="info-section">
      <p><strong>Type:</strong> <%= @result[:star].star_type %></p>
      <p><strong>Constellation:</strong> <%= @result[:star].constellation %></p>
      <p><strong>Notes:</strong> <%= @result[:star].notes %></p>
    </div>
  </div>

  <!-- Propulsion Info -->
  <div class="card">
    <div class="card-title">üîß About <%= @result[:propulsion_system].name %></div>
    <div class="info-section">
      <p><strong>Technology Status:</strong> <%= @result[:propulsion_system].technology_readiness %></p>
      <p><strong>Description:</strong> <%= @result[:propulsion_system].description %></p>
    </div>
  </div>
<% end %>
